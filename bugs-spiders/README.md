# Игра "Жуки и пауки"

## Идея

Игра про то, как живут жуки и пауки и другие козявки в траве. Игрок может только смотреть на них,
нельзя управлять жуками, они сами знают, куда идут. Но игром может рассыпать разные ништяки,
к которым у жуков слабость. Также игрок может лить воду, класть брёвна, мешающие продвижению жуков.

## Инфраструктура
Игра написана на языке TypeScript. 
Используется бандлер Vite для транспиляции и сборки игры.
Все публичные методы компонентов игры покрыты юнит-тестами.
Методы рендера покрыты визуальными тестами (библиотека `canvas`).
Поведение активных объектов покрыто поведенческими тестами с поднятием виртуальной среды (игра без рендера, но с обсчётом мира).

## Архитектура

Игра разделена на следующие логические части:

* Игра (Game):
  * Мир (World):
    * Игровое поле (GameField)
    * Игровые объекты:
      * Статичные объекты
      * Движущиеся объекты

### Игра
Работает это всё следующим образом: при загрузке приложения игра инициализируется. 
У игры есть состояния (инициализирована, идёт игра, закончена). Пользователь
управляет этими состояними посредством меню, ну и если игра заканчивается.

Игра отслеживает действия (клики) пользователя и вносит изменения в мир.

Игра отрисовывает мир в интерфейсе пользователя. Показывается лишь небольшой кусочек мира.
Пользователь может прокручивать поле зрения и масштабировать его (с дискретным шагом).

### Мир
При начале игры инициализируется и начинает жить мир. Жизненный цикл мира следующий:
- расчёт новых координат (и других параметров: статус, вес, рост и т.д.) движущихся объектов
- проверка коллизий и другого взаимодействия объектов
- проверка условий окончания игры

### Игровое поле
Игровое поле состоит из 3х слоёв:
- воздух
- поверхность
- почва

Различные объекты могут находиться в различных слоях, это указано в свойствах объекта 
где он может находиться.

Коллизии и взаимодействие по каждому объекту рассчитываются в зависимости от того, 
в каком он слое.

#### Воздух
Воздух прозрачный, его занимают только движущиеся объекты, у него нет карты слоя. 
Просто помечается, что объект сейчас в слое воздуха.

#### Поверхность
Поверхность имеет карту слоя из квадратных клеток. Каждая клетка может быть следующих типов:
- вода
- земля
- трава

#### Почва
Почва тоже имеет карту слоя, каждая клетка может быть двух типов:
- пустая
- заполненная

### Статичные объекты
Статичные объекты могут быть следующие:
- яйцо
- растение
- еда (корм)
- укрытие
Не смотря на то, что объекты статичные, они могут изменяться в процессе работы мира.
Еда может исчезнуть, если её съели, растения тоже может исчезнуть (его съели или оно засохло),
на месте яйца может появиться новое существо.

### Движущиеся объекты
Это те самые жуки-пауки, живые существа. Живое существо может перемещаться по карте, менять слои 
(если у него есть такое качество). Например, жук может закопаться в землю или летать в воздухе, 
а паук может передвигаться только по поверхности, муха может летать, но не может зарываться.

Есть несколько классов живых существ:
- пауки
- жуки
- мухи

Каждое живое существо обладает изменяемыми и неизменямыми свойствами. 

Изменяемые свойства:
- координаты
- направление
- скорость
- количество сил

Неизменяемые свойства:
- класс
- список сред, где оно может перемещаться
- максимальная скорость (в каждой среде своя)
- дальность зрения (в каждой среде своя)

### 

### 
